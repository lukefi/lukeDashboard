<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/smartdasher@1.0.10/dist/main.css"> <!--Calling the styles of SmartDasher-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
</body>
  <script src="https://unpkg.com/smartdasher@1.0.10/dist/bundle.js"></script> <!--Calling the functions of SmartDasher-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <script src="./wrapGraph.js"></script> <!--Calling function to generate graphs-->
  <script src="./ficData.js"></script> <!--Calling ficticious data-->

<script>
    var title = 'Title of the dashboard'
    var logo = './logo-generic.png'
    
    //Initiate dashboard with basic information
    SmartDasher.initiateDashboard(
        title = title,
        logo = logo, 
        renderMap = false, 
        flipperButton = false, 
        textTranslations = null, 
        language = null
      )

    //Verifying, from data, what categories and option are availabele to the user
    var [categories, options] = SmartDasher.extractCategoriesAndOptions(data, dependentVariableName = 'value')

    //Setting the check-box system for user-selection of categories
    SmartDasher.generateCheckBoxes(categories, options, data, dependentVariable = 'value', labels = null, textTranslations = null, language, whereAppend = 'boxTop', wrapFunction = console.log)
    var checkedValues = SmartDasher.checkedValuesObjectGenerator(categories)     //Instanciating object which will hold whatever value user selects on check-box verification system
    SmartDasher.checkBoxVerificationSystem(categories, checkedValues, data, SmartDasher.filterDataByCheckBox, exception = "statistic")

    //Creating instance of wrap-generating function
    function wraperGraph(){
        wrapGraph(checkedValues, categories, filteredData)
    }

    //Assigning graph-generating function to button of the page
    var renderButton = document.getElementById("buttonDimensionSelector");
    var renderButton2 = document.getElementById("buttonDimensionSelector2");
    renderButton.addEventListener("click", wraperGraph);
    renderButton2.addEventListener("click", wraperGraph);

    //Automatically choose selection when user opens page
    var multi = ["year", "region"];//Selecting two multiclass classifiers for automatic selection
    var single = categories.filter(i => multi.includes(i) == false)//Establishing the single classifiers
    SmartDasher.simulateSelection(multi, single)
    wrapGraph(checkedValues, categories, filteredData)
    SmartDasher.displayNonGraphs(window.filteredData)

</script>
</html>
